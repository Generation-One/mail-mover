# IMAP Synchronization Service Configuration
# Copy this file to .env and configure your settings

# =============================================================================
# REQUIRED SETTINGS - Source IMAP Server (HOST_1)
# =============================================================================

# Source IMAP server hostname or IP address
HOST_1=imap.gmail.com

# Source IMAP server username/email
USER_1=source@example.com

# Source IMAP server password or app-specific password
# For Gmail: Use App Password, not your regular password
# For Exchange: Use your regular password or app password
PASSWORD_1=your_source_password_here

# =============================================================================
# REQUIRED SETTINGS - Destination IMAP Server (HOST_2)
# =============================================================================

# Destination IMAP server hostname or IP address
HOST_2=imap.destination.com

# Destination IMAP server username/email
USER_2=destination@example.com

# Destination IMAP server password or app-specific password
PASSWORD_2=your_destination_password_here

# =============================================================================
# OPTIONAL SETTINGS - Synchronization Behavior
# =============================================================================

# =============================================================================
# SYNCHRONIZATION MODE SETTINGS
# =============================================================================

# Synchronization mode (default: poll)
# Options:
#   - poll: Traditional polling every POLL_SECONDS (original behavior)
#   - idle: IMAP IDLE - keeps connection open, real-time notifications
#   - push: Gmail Push Notifications via Pub/Sub (Gmail only)
SYNC_MODE=poll

# Polling interval in seconds (default: 15) - only used in poll mode
# How often to check for new emails
POLL_SECONDS=15

# IDLE timeout in seconds (default: 1740 = 29 minutes)
# Gmail IDLE connections timeout after 30 minutes, so we refresh at 29
IDLE_TIMEOUT=1740

# Folder to synchronize (default: INBOX)
# Use IMAP folder names, case-sensitive
FOLDER=INBOX

# Move mode - delete emails from source after successful copy (default: false)
# WARNING: This will permanently delete emails from the source server!
# Set to "true" to enable move mode, leave empty or "false" to disable
MOVE=false

# =============================================================================
# SAFETY AND RATE LIMITING SETTINGS
# =============================================================================

# Date filter - only sync emails from last N days (default: 30)
# This prevents syncing massive email histories and hitting rate limits
DATE_FILTER_DAYS=30

# Maximum emails per sync operation (default: 1000)
# Prevents overwhelming the servers and hitting rate limits
MAX_EMAILS_PER_SYNC=1000

# Maximum email size in bytes (default: 50MB)
# Prevents syncing huge attachments that could cause timeouts
MAX_EMAIL_SIZE=50000000

# =============================================================================
# GMAIL PUSH NOTIFICATION SETTINGS (only for SYNC_MODE=push)
# =============================================================================

# Google Cloud Project ID (required for push mode)
GOOGLE_CLOUD_PROJECT=your-project-id

# Pub/Sub topic and subscription names
PUBSUB_TOPIC=gmail-sync-topic
PUBSUB_SUBSCRIPTION=gmail-sync-subscription

# Google credentials file paths
GOOGLE_CREDENTIALS=/app/credentials.json
GOOGLE_TOKEN=/app/token.json

# =============================================================================
# OPTIONAL SETTINGS - SSL/TLS Configuration
# =============================================================================

# Enable SSL for source server (HOST_1)
# Set to "true" to force SSL connection
SSL1=true

# Enable SSL for destination server (HOST_2)
# Set to "true" to force SSL connection
SSL2=true

# Disable TLS for source server (HOST_1)
# Set to "true" to disable TLS (not recommended for production)
# NOTLS1=false

# Disable TLS for destination server (HOST_2)
# Set to "true" to disable TLS (not recommended for production)
# NOTLS2=false

# =============================================================================
# OPTIONAL SETTINGS - Logging and Debugging
# =============================================================================

# Log level (default: INFO)
# Options: DEBUG, INFO, WARN, ERROR
LOG_LEVEL=INFO

# Health check port (default: 8080)
# Port used for Docker health checks
HEALTH_CHECK_PORT=8080

# =============================================================================
# EXAMPLE CONFIGURATIONS
# =============================================================================

# Gmail to Gmail:
# HOST_1=imap.gmail.com
# SSL1=true
# HOST_2=imap.gmail.com
# SSL2=true

# Gmail to Exchange Online:
# HOST_1=imap.gmail.com
# SSL1=true
# HOST_2=outlook.office365.com
# SSL2=true

# Exchange to Exchange:
# HOST_1=mail.company1.com
# SSL1=true
# HOST_2=mail.company2.com
# SSL2=true

# Local server (no SSL):
# HOST_1=192.168.1.100
# NOTLS1=true
# HOST_2=192.168.1.200
# NOTLS2=true

# =============================================================================
# SECURITY NOTES
# =============================================================================

# 1. Never commit the actual .env file to version control
# 2. Use app-specific passwords when available (Gmail, Outlook)
# 3. Consider using environment variables in production instead of .env files
# 4. Regularly rotate passwords and credentials
# 5. Use SSL/TLS whenever possible
# 6. Test with MOVE=false before enabling move mode
# 7. Monitor logs for authentication failures and connection issues

# =============================================================================
# TROUBLESHOOTING
# =============================================================================

# Common IMAP server settings:
#
# Gmail:
#   - Server: imap.gmail.com, Port: 993 (SSL)
#   - Requires App Password (not regular password)
#   - Enable "Less secure app access" or use OAuth2
#
# Outlook/Hotmail:
#   - Server: outlook.office365.com, Port: 993 (SSL)
#   - May require App Password
#
# Yahoo:
#   - Server: imap.mail.yahoo.com, Port: 993 (SSL)
#   - Requires App Password
#
# Exchange Server:
#   - Server: Usually mail.domain.com or autodiscover.domain.com
#   - Port: 993 (SSL) or 143 (STARTTLS)
#   - Check with your IT administrator
